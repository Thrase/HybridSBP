# RUN WITH CUBIT 15.2

# Set units to SI.
${Units('si')}

#---------------
reset

${Lx=1}
${Ly=1}
${H=0.4}

create surface rectangle width {2*Lx} height {Ly} zplane 
move Surface 1  location 0 {-Ly/2} 0 include_merged

create vertex     0     0   0
create vertex     0  {-Ly}  0

create vertex     0  {-H}  0
create vertex  {  H}   0   0

create curve vertex  5  6 delete
create curve vertex  7  8 delete

imprint tolerant surface 1 with curve 5 6 merge
delete curve 5 6

surface 2 3 4 size 0.25
mesh surface 2 3 4

# Sideset 1 add curve 2 4           # Dirichlet :: 1
# Sideset 2 add curve 9 10 12 13 14 # Neumann :: 2

# Sideset 7 add curve 11 # top main :: 7
# Sideset 8 add curve 8  # bottom main :: 8
# Sideset 9 add curve 7  # branch :: 9

Sideset 1 add curve 2 4           # Dirichlet :: 1
Sideset 1 add curve 9 10 12 13 14 # Neumann :: 2

Sideset 1 add curve 11 # top main :: 7
Sideset 1 add curve 8  # bottom main :: 8
Sideset 1 add curve 7  # branch :: 9


block 1 add surface 3 # left side
block 2 add surface 4 # wedge
block 3 add surface 2 # right side

export Abaqus "/Users/jekozdon/codes/D2_sbp/meshes/branch.inp"  overwrite
